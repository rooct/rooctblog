<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.6">
<link rel="alternate" type="application/rss+xml" href="/rooctblog/blog/rss.xml" title="Develop Site Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/rooctblog/blog/atom.xml" title="Develop Site Blog Atom Feed"><title data-react-helmet="true">RandomDAOäº‹ä»¶åŠå…¶åˆ†æ | Develop Site</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://rooct.github.io/rooctblog/docs/dapps/Event/RandomDAO"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="RandomDAOäº‹ä»¶åŠå…¶åˆ†æ | Develop Site"><meta data-react-helmet="true" name="description" content="äº‹ä»¶æ¦‚è¦"><meta data-react-helmet="true" property="og:description" content="äº‹ä»¶æ¦‚è¦"><link data-react-helmet="true" rel="shortcut icon" href="/rooctblog/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://rooct.github.io/rooctblog/docs/dapps/Event/RandomDAO"><link data-react-helmet="true" rel="alternate" href="https://rooct.github.io/rooctblog/docs/dapps/Event/RandomDAO" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://rooct.github.io/rooctblog/docs/dapps/Event/RandomDAO" hreflang="x-default"><link rel="stylesheet" href="/rooctblog/assets/css/styles.63c342b0.css">
<link rel="preload" href="/rooctblog/assets/js/runtime~main.cf7fc36f.js" as="script">
<link rel="preload" href="/rooctblog/assets/js/main.998fc8e4.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/rooctblog/"><img src="/rooctblog/img/logo.svg" alt="Dev Site Logo" class="themedImage_TMUO themedImage--light_4Vu1 navbar__logo"><img src="/rooctblog/img/logo.svg" alt="Dev Site Logo" class="themedImage_TMUO themedImage--dark_uzRr navbar__logo"><b class="navbar__title">Dev Site</b></a><a class="navbar__item navbar__link" href="/rooctblog/docs/intro">Solidity</a><a class="navbar__item navbar__link" href="/rooctblog/docs/evm">EVM</a><a class="navbar__item navbar__link navbar__link--active" href="/rooctblog/docs/dapp">Dapps</a><a class="navbar__item navbar__link" href="/rooctblog/blog">Blog</a></div><div class="navbar__items navbar__items--right"><div class="react-toggle toggle_2i4l react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_iYfV">ğŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_iYfV">ğŸŒ</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_lDyR"><button class="clean-btn backToTopButton_i9tI" type="button"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_0YBq"><div class="sidebar_a3j0"><nav class="menu thin-scrollbar menu_cyFh menuWithAnnouncementBar_+O1J"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist" href="#">Dapps</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rooctblog/docs/dapp">smartcontract</a></li></ul></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">DEX</a></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Event</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rooctblog/docs/dapps/Event/EIP1559_GAS">EIP1559ä¸‹çš„ GAS è´¹è®¾ç½®è§£æ</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rooctblog/docs/dapps/Event/OnChainMessageProtocol">é“¾ä¸Šé€šä¿¡åè®®ï¼Œåˆ°åº•æœ‰ä»€ä¹ˆç”¨ï¼Ÿ</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rooctblog/docs/dapps/Event/README">æ™ºèƒ½åˆçº¦äº‹ä»¶åˆ†æ</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/rooctblog/docs/dapps/Event/RandomDAO">RandomDAOäº‹ä»¶åŠå…¶åˆ†æ</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rooctblog/docs/dapps/Event/X2Y2_DecentralizedOrderReward">X2Y2: å¿…é¡»ä¿®æ”¹çš„ä¸­å¿ƒåŒ–NFTæŒ‚å•å¥–åŠ±æœºåˆ¶</a></li></ul></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Example</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">GunPool</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Loan</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">NFT</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Robot</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Solidity</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">StableCoin</a></li></ul></nav></div></aside><main class="docMainContainer_r8cw"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><div class="tocCollapsible_aw-L theme-doc-toc-mobile tocMobile_Tx6Y"><button type="button" class="clean-btn tocCollapsibleButton_zr6a">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>RandomDAOäº‹ä»¶åŠå…¶åˆ†æ</h1></header><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="äº‹ä»¶æ¦‚è¦"></a>äº‹ä»¶æ¦‚è¦<a class="hash-link" href="#äº‹ä»¶æ¦‚è¦" title="Direct link to heading">#</a></h2><p>2022å¹´2æœˆ4æ—¥ï¼Œ12å²ä¸­å›½æ·±åœ³å°å­¦ç”Ÿé»„æŒ¯ï¼ˆç½‘ä¼ åï¼‰åœ¨ <a href="https://space.bilibili.com/516216318" target="_blank" rel="noopener noreferrer">Bç«™</a> å’Œ <a href="https://twitter.com/therandomdao" target="_blank" rel="noopener noreferrer">twitter</a> ä¸Šå‘å¸ƒäº†è‡ªå·±çš„solidityæ•™å­¦è§†é¢‘ï¼Œå‘å¸ƒäº†è‡ªå·±çš„æ•™å­¦é¡¹ç›® <a href="http://therandomdao.com/" target="_blank" rel="noopener noreferrer">RandomDAO</a>ã€‚éšç€ä¸€äº›å¤§Vçš„è½¬å‘ï¼Œè¿™ä¸ªé¡¹ç›®å¼•èµ·äº†å¸æ°‘ä»¬çš„æ³¨æ„ã€‚ç›´åˆ°2022å¹´2æœˆ8æ—¥ï¼Œå·²ç»æœ‰è¶…è¿‡47000ä¸ªåœ°å€é¢†å–äº†ä»–å‘å¸ƒçš„ç©ºæŠ•ä»£å¸ <a href="https://etherscan.io/token/0x1c7E83f8C581a967940DBfa7984744646AE46b29" target="_blank" rel="noopener noreferrer">RND</a>ï¼Œå¹¶æ›¾è¾¾åˆ°ETHæ¶ˆè€—gasè´¹æ’è¡Œç¬¬äºŒã€‚</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="äº‹ä»¶åˆ†æ"></a>äº‹ä»¶åˆ†æ<a class="hash-link" href="#äº‹ä»¶åˆ†æ" title="Direct link to heading">#</a></h2><p>ç”±äºè¿™æ˜¯ä¸€ä¸ªåå‘æŠ€æœ¯çš„ç¤¾ç¾¤ï¼Œå› æ­¤æˆ‘ä¸€èˆ¬åªå…³æ³¨æŠ€æœ¯æ–¹é¢çš„ç‰¹ç‚¹ã€‚é»„æŒ¯åŒå­¦ï¼ˆæš‚ä¸”å…ˆè¿™ä¹ˆç§°å‘¼ç€ï¼‰å‘å¸ƒçš„ Random åˆçº¦åªæ˜¯ä¸€ä¸ªæ™®é€šçš„ ERC20 åˆçº¦åŠ ä¸€ä¸ªç©ºæŠ•é€»è¾‘ï¼Œæœ¬æ¥æ˜¯ä¸å€¼å¾—å¼€ç¯‡æ–‡ç« è¯´çš„ã€‚ä½†æ˜¯åŒºå—é“¾ç½‘ç»œä¸Šå‡ºç°äº†ä¸€ä¸ªéšä¹‹è€Œç”Ÿçš„çªå˜ï¼š<a href="https://github.com/33357/airdrop_multi_claim" target="_blank" rel="noopener noreferrer">https://github.com/33357/airdrop_multi_claim</a> è¿™ä¸ªåˆçº¦å®ç°äº†å¯¹ Random åˆçº¦ç©ºæŠ•çš„æ‰¹é‡è·å–ï¼Œå¹¶å€Ÿæ­¤è·å–äº†å¤§é‡æ”¶ç›Š <a href="https://etherscan.io/tx/0xfc1d5688c18244764fe3678020b4821a8c215c7a7f42685814b3cf49557967ff" target="_blank" rel="noopener noreferrer">https://etherscan.io/tx/0xfc1d5688c18244764fe3678020b4821a8c215c7a7f42685814b3cf49557967ff</a>ï¼ˆä¿å®ˆä¼°è®¡30å¤šä¸ªETHï¼‰, è¿™å°±éå¸¸å€¼å¾—æˆ‘æ¥å¥½å¥½ç ”ç©¶ä¸€ä¸‹å®ƒçš„å®ç°é€»è¾‘äº†ã€‚</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="åˆçº¦åˆ†æ"></a>åˆçº¦åˆ†æ<a class="hash-link" href="#åˆçº¦åˆ†æ" title="Direct link to heading">#</a></h2><ul><li><p>æ“ä½œåŸç†</p><p>  æˆ‘ä»¬çœ‹åˆ° <a href="https://etherscan.io/address/0x1c7E83f8C581a967940DBfa7984744646AE46b29#code" target="_blank" rel="noopener noreferrer">https://etherscan.io/address/0x1c7E83f8C581a967940DBfa7984744646AE46b29#code</a> ä¸Šçš„è·å–ç©ºæŠ•å‡½æ•°æ˜¯è¿™æ ·å†™çš„</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">    function claim() external{</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        if( (uint32(block.timestamp)-release_time) &lt;= 360 days &amp;&amp; is_claim[msg.sender] == false ){</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            is_claim[msg.sender] = true;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            yet_claim_people.push(msg.sender);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            _mint(msg.sender,return_claim_number());</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        }   </span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>  è¿™é‡Œå¯¹<code>claim</code>å‡½æ•°çš„æ£€æŸ¥åªæœ‰ä¸¤ä¸ªï¼š</p><ul><li><code>(uint32(block.timestamp)-release_time) &lt;= 360 days</code>ï¼Œé¢†å–ç©ºæŠ•çš„æ—¶é—´éœ€è¦åœ¨åˆçº¦å‘å¸ƒä¹‹åçš„360å¤©ä¹‹å†…ã€‚</li><li><code>is_claim[msg.sender] == false</code>ï¼Œé¢†å–è¿‡çš„åœ°å€ä¸èƒ½å†é¢†å–ã€‚
ä½†æ˜¯è¿™é‡Œå¹¶æ²¡æœ‰æ‹’ç»åˆçº¦çš„è°ƒç”¨ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä½¿ç”¨åˆçº¦åœ°å€è¿›è¡Œclaimæ˜¯å®Œå…¨å¯ä»¥çš„ï¼Œè¿™å°±ä¸ºæ¥ä¸‹æ¥çš„æ“ä½œæä¾›äº†åŸºç¡€ã€‚</li></ul></li><li><p>æ‰¹é‡åˆ›å»ºåˆçº¦å®ç°æ‰¹é‡é¢†å–ç©ºæŠ•</p><ul><li><p>multi_claim_with_selfdestruct.txt</p><p>  åœ¨ <a href="https://github.com/33357/airdrop_multi_claim/blob/main/contracts/multi_claim_with_selfdestruct.txt" target="_blank" rel="noopener noreferrer">multi_claim_with_selfdestruct.txt</a> æ–‡ä»¶ä¸­ï¼Œå¯ä»¥çœ‹åˆ°ä¸»æ–¹æ³•<code>call</code>çš„å®ç°</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">call</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">uint256 times</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">for</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">uint i</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">i</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">times</span><span class="token punctuation" style="color:#393A34">;</span><span class="token operator" style="color:#393A34">++</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">claimer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">contra</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>  è¿™é‡Œé€šè¿‡<code>for</code>å¾ªç¯å®ç°äº†æ‰¹é‡åˆ›å»ºåˆçº¦<code>claimer</code>ã€‚</p><p>  æ¥ä¸‹æ¥çœ‹<code>claimer</code>åˆçº¦çš„å®ç°</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">contract claimer</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">constructor</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">address contra</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">airdrop</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">contra</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">claim</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        uint256 balance </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">airdrop</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">contra</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">balanceOf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">address</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">airdrop</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">contra</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">transfer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">address</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">tx</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">origin</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> balance</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">selfdestruct</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">payable</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">address</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">msg</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">sender</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>  åœ¨<code>claimer</code>åˆçº¦åˆå§‹åŒ–å‡½æ•°<code>constructor</code>ä¸­ï¼Œè°ƒç”¨äº†<code>airdrop</code>åˆçº¦çš„<code>claim</code>æ–¹æ³•ï¼Œè€Œ<code>airdrop</code>åˆçº¦å°±æ˜¯ä¸Šé¢æåˆ°çš„<code>RND</code>ä»£å¸ç©ºæŠ•åˆçº¦ã€‚åœ¨è·å–<code>RND</code>ä»£å¸çš„ç©ºæŠ•ä¹‹åï¼Œ<code>claimer</code>åˆçº¦ä¼šå°†<code>RND</code>ä»£å¸è½¬ç»™è°ƒç”¨é“¾å‘èµ·äºº<code>tx.origin</code>ï¼Œæœ€åè°ƒç”¨<code>selfdestruct</code>è‡ªæ¯åˆçº¦ã€‚ï¼ˆè¿™é‡Œè‡ªæ¯åˆçº¦çš„é€»è¾‘æ²¡æœ‰ææ¸…æ¥šï¼Œæ®è¯´è‡ªæ¯åˆçº¦å¯ä»¥è¿”è¿˜gasè´¹ï¼Œä¸çŸ¥çœŸå‡ï¼‰
</p></li><li><p>multi_claim.sol</p><p>  åœ¨<a href="https://github.com/33357/airdrop_multi_claim/blob/main/contracts/multi_claim.sol" target="_blank" rel="noopener noreferrer">multi_claim.sol</a> æ–‡ä»¶ä¸­ï¼Œå¯ä»¥çœ‹åˆ°å®ƒçš„å®ç°é€»è¾‘å’Œ <code>multi_claim_with_selfdestruct.txt</code> æ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯å¤šäº†ä¸€ä¸ªé¢å¤–çš„å‡½æ•° <code>addressto</code></p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">addressto</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">address _origin</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> uint256 _nonce</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> internal pure </span><span class="token function" style="color:#d73a49">returns</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">address _address</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    bytes memory data</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">_nonce </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0x00</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">          data </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> abi</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">encodePacked</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">bytes1</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0xd6</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">bytes1</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0x94</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> _origin</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">bytes1</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0x80</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">else</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">_nonce </span><span class="token operator" style="color:#393A34">&lt;=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0x7f</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">     data </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> abi</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">encodePacked</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">bytes1</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0xd6</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">bytes1</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0x94</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> _origin</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">uint8</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">_nonce</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">else</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">_nonce </span><span class="token operator" style="color:#393A34">&lt;=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0xff</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">     data </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> abi</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">encodePacked</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">bytes1</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0xd7</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">bytes1</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0x94</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> _origin</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">bytes1</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0x81</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">uint8</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">_nonce</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">else</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">_nonce </span><span class="token operator" style="color:#393A34">&lt;=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0xffff</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">   data </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> abi</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">encodePacked</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">bytes1</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0xd8</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">bytes1</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0x94</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> _origin</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">bytes1</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0x82</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">uint16</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">_nonce</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">else</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">_nonce </span><span class="token operator" style="color:#393A34">&lt;=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0xffffff</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> data </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> abi</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">encodePacked</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">bytes1</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0xd9</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">bytes1</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0x94</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> _origin</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">bytes1</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0x83</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">uint24</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">_nonce</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">else</span><span class="token plain">                        data </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> abi</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">encodePacked</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">bytes1</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0xda</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">bytes1</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0x94</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> _origin</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">bytes1</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0x84</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">uint32</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">_nonce</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    bytes32 hash </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">keccak256</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">data</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    assembly </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">mstore</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> hash</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token literal-property property" style="color:#36acaa">_address</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:</span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">mload</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>  æ®æˆ‘æ‰€çŸ¥ï¼Œè¿™ä¸ªå‡½æ•°å®ç°äº†å¯¹éƒ¨ç½²ä¸‹ä¸€ä¸ªåˆçº¦åœ°å€çš„é¢„æµ‹ï¼Œåœ¨<code>claimer</code>åˆçº¦å½“ä¸­</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">contract claimer</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">constructor</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">address selfAdd</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> address receiver</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        address contra </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">address</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0xbb2A2D70d6a4B80FA2C4d4Ca43a8525da430196c</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">airdrop</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">contra</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">claim</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        uint256 balance </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">airdrop</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">contra</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">balanceOf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">selfAdd</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">balance</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">&#x27;Oh no&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">airdrop</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">contra</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">transfer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">receiver</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> balance</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>  åœ¨<code>uint256 balance = airdrop(contra).balanceOf(selfAdd)</code>ä¸­ï¼Œ<code>selfAdd</code>æ˜¯é¢„æµ‹å‡ºæ¥çš„åˆçº¦åˆçº¦åœ°å€ï¼Œæ‰€ä»¥è¿™é‡Œèƒ½è·å–æ­£ç¡®çš„<code>balance</code>ã€‚è¿™ä¸ª<code>claimer</code>åˆçº¦ç§»é™¤äº†<code>selfdestruct</code>å‡½æ•°ã€‚</p></li><li><p>ç–‘é—®</p><p>  åœ¨<code>README.md</code>æ–‡ä»¶ä¸­ï¼Œè¯´ <code>multi_claimåˆçº¦å®ç°äº†é«˜æ•ˆæ’¸ï¼ˆä¸€æ¬¡äº¤æ˜“claimå¤šæ¬¡ï¼‰æ²¡æœ‰EOAæœºåˆ¶çš„åˆçº¦</code> å¯¹æ­¤æˆ‘æ²¡æœ‰èƒ½å¤Ÿå®Œå…¨ç†è§£ï¼Œç‰¹åˆ«æ˜¯åšåœ°å€é¢„æµ‹çš„ç›®çš„å’Œ <code>selfdestruct</code> çš„ä½¿ç”¨ï¼Œå¸Œæœ›æœ‰çŸ¥é“çš„å¤§ä½¬ä»¬å‘Šè¯‰ä¸€ä¸‹ï¼Œå¥½å¡«å®Œè¿™ä¸ªå‘ã€‚</p></li></ul></li></ul></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/rooctblog/docs/dapps/Event/README"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« æ™ºèƒ½åˆçº¦äº‹ä»¶åˆ†æ</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/rooctblog/docs/dapps/Event/X2Y2_DecentralizedOrderReward"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">X2Y2: å¿…é¡»ä¿®æ”¹çš„ä¸­å¿ƒåŒ–NFTæŒ‚å•å¥–åŠ±æœºåˆ¶ Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#äº‹ä»¶æ¦‚è¦" class="table-of-contents__link">äº‹ä»¶æ¦‚è¦</a></li><li><a href="#äº‹ä»¶åˆ†æ" class="table-of-contents__link">äº‹ä»¶åˆ†æ</a></li><li><a href="#åˆçº¦åˆ†æ" class="table-of-contents__link">åˆçº¦åˆ†æ</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Solidity</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/rooctblog/docs/solidity/example/Helloworld">HelloWorld</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/rooctblog/">Stack Overflow</a></li></ul></div><div class="col footer__col"><div class="footer__title">Feature</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/rooctblog/">Feature</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/rooctblog/blog">Blog</a></li><li class="footer__item"><a class="footer__link-item" href="/rooctblog/">GitHub</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2022 dev site, Inc. Built with dev.</div></div></div></footer></div>
<script src="/rooctblog/assets/js/runtime~main.cf7fc36f.js"></script>
<script src="/rooctblog/assets/js/main.998fc8e4.js"></script>
</body>
</html>