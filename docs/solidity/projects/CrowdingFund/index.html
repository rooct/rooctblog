<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.6">
<link rel="alternate" type="application/rss+xml" href="/rooctblog/blog/rss.xml" title="Develop Site Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/rooctblog/blog/atom.xml" title="Develop Site Blog Atom Feed"><title data-react-helmet="true">ä¼—ç­¹ | Develop Site</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://rooct.github.io/rooctblog/docs/solidity/projects/CrowdingFund"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="ä¼—ç­¹ | Develop Site"><meta data-react-helmet="true" name="description" content="`"><meta data-react-helmet="true" property="og:description" content="`"><link data-react-helmet="true" rel="shortcut icon" href="/rooctblog/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://rooct.github.io/rooctblog/docs/solidity/projects/CrowdingFund"><link data-react-helmet="true" rel="alternate" href="https://rooct.github.io/rooctblog/docs/solidity/projects/CrowdingFund" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://rooct.github.io/rooctblog/docs/solidity/projects/CrowdingFund" hreflang="x-default"><link rel="stylesheet" href="/rooctblog/assets/css/styles.63c342b0.css">
<link rel="preload" href="/rooctblog/assets/js/runtime~main.3733cacf.js" as="script">
<link rel="preload" href="/rooctblog/assets/js/main.bdc4c2f6.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/rooctblog/"><img src="/rooctblog/img/logo.svg" alt="Dev Site Logo" class="themedImage_TMUO themedImage--light_4Vu1 navbar__logo"><img src="/rooctblog/img/logo.svg" alt="Dev Site Logo" class="themedImage_TMUO themedImage--dark_uzRr navbar__logo"><b class="navbar__title">Dev Site</b></a><a class="navbar__item navbar__link" href="/rooctblog/docs/intro">Solidity</a><a class="navbar__item navbar__link" href="/rooctblog/docs/evm">EVM</a><a class="navbar__item navbar__link" href="/rooctblog/docs/dapp">Dapps</a><a class="navbar__item navbar__link" href="/rooctblog/docs/devtool">DevTools</a><a class="navbar__item navbar__link" href="/rooctblog/docs/daily">DailyTech</a><a class="navbar__item navbar__link" href="/rooctblog/blog">Blog</a></div><div class="navbar__items navbar__items--right"><div class="react-toggle toggle_2i4l react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_iYfV">ğŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_iYfV">ğŸŒ</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_lDyR"><button class="clean-btn backToTopButton_i9tI" type="button"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><main class="docMainContainer_r8cw docMainContainerEnhanced_SOUu"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><div class="theme-doc-markdown markdown"><header><h1>ä¼—ç­¹</h1></header><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">// SPDX-License-Identifier: MIT</span></span><span class="token-line" style="color:#393A34"><span class="token plain">pragma solidity &gt;=0.4.22 &lt;0.9.0;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">contract CrowdFunding {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span></span><span class="token-line" style="color:#393A34"><span class="token plain">  // æŠ•èµ„äººç»“æ„å®šä¹‰</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  struct Funder {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    address payable addr;   // æŠ•èµ„äººçš„åœ°å€</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    uint amount;            // å‡ºèµ„æ•°é¢</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  // èµ„é‡‘ä½¿ç”¨è¯·æ±‚ç»“æ„å®šä¹‰</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  struct Use {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    string info;                     // ä½¿ç”¨è¯·æ±‚çš„è¯´æ˜</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    uint goal;                       // ä½¿ç”¨è¯·æ±‚çš„æ•°é¢</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    uint agreeAmount;                // ç›®å‰çš„åŒæ„æ•°é¢</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    uint disagree;                   // ç›®å‰çš„ä¸åŒæ„æ•°é¢</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    bool over;                       // è¯·æ±‚æ˜¯å¦ç»“æŸ</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    mapping(uint =&gt; uint) agree;     // å‡ºèµ„äººæ˜¯å¦åŒæ„ 0: è¿˜æ²¡å†³å®šï¼Œ1ï¼šåŒæ„ï¼Œ2ï¼šä¸åŒæ„</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  // ä¼—ç­¹é¡¹ç›®çš„ç»“æ„å®šä¹‰</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  struct Funding {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    address payable initiator;       // å‘èµ·äºº</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    string title;                    // é¡¹ç›®æ ‡é¢˜</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    string info;                     // é¡¹ç›®ç®€ä»‹</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    uint goal;                       // ç›®æ ‡é‡‘é¢</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    uint endTime;                    // ä¼—ç­¹ç»“æŸæ—¶é—´</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    bool success;                    // ä¼—ç­¹æ˜¯å¦æˆåŠŸï¼ŒæˆåŠŸåˆ™ amount å«ä¹‰ä¸ºé¡¹ç›®å‰©ä½™çš„é’±</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    uint amount;                     // å½“å‰å·²ç»ç­¹é›†åˆ°çš„é‡‘é¢</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    uint numFunders;                 // æŠ•èµ„è®°å½•æ•°é‡</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    uint numUses;                    // ä½¿ç”¨è¯·æ±‚æ•°é‡</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    mapping(uint =&gt; Funder) funders; // æŠ•èµ„è®°å½•å…·ä½“ä¿¡æ¯</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    mapping(uint =&gt; Use) uses;       // æ‰€æœ‰çš„ä½¿ç”¨è¯·æ±‚</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  uint public numFundings;                  // ä¼—ç­¹é¡¹ç›®æ•°é‡</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  mapping(uint =&gt; Funding) public fundings; // æ‰€æœ‰çš„ä¼—ç­¹é¡¹ç›®</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  /**</span></span><span class="token-line" style="color:#393A34"><span class="token plain">   * å‘èµ·ä¼—ç­¹é¡¹ç›®</span></span><span class="token-line" style="color:#393A34"><span class="token plain">   * @param initiator å‘èµ·äºº</span></span><span class="token-line" style="color:#393A34"><span class="token plain">   * @param title é¡¹ç›®æ ‡é¢˜</span></span><span class="token-line" style="color:#393A34"><span class="token plain">   * @param info é¡¹ç›®ç®€ä»‹</span></span><span class="token-line" style="color:#393A34"><span class="token plain">   * @param goal ç›®æ ‡é‡‘é¢</span></span><span class="token-line" style="color:#393A34"><span class="token plain">   * @param endTime ç»“æŸæ—¶é—´</span></span><span class="token-line" style="color:#393A34"><span class="token plain">   */</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  function newFunding(address payable initiator, string memory title, string memory info, uint goal, uint endTime) public returns(uint) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    require(endTime &gt; block.timestamp);</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    numFundings = numFundings + 1;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    Funding storage f = fundings[numFundings];</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    f.initiator = initiator;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    f.title = title;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    f.info = info;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    f.goal = goal;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    f.endTime = endTime;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    f.success = false;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    f.amount = 0;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    f.numFunders = 0;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    f.numUses = 0;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span></span><span class="token-line" style="color:#393A34"><span class="token plain">    return numFundings;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  function contribute(uint ID) public payable {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    // è´¡çŒ®çš„é’±å¿…é¡»å¤§äº0ï¼Œä¸èƒ½è¶…è¿‡å·®é¢</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    require(msg.value &gt; 0 &amp;&amp; msg.value &lt;= fundings[ID].goal - fundings[ID].amount);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    // æ—¶é—´ä¸Šå¿…é¡»è¿˜æ²¡ç»“æŸ</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    require(fundings[ID].endTime &gt; block.timestamp);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    // å¿…é¡»æ˜¯æœªå®Œæˆçš„ä¼—ç­¹</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    require(fundings[ID].success == false);</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    Funding storage f = fundings[ID];</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    f.amount += msg.value;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    f.numFunders = f.numFunders + 1;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    f.funders[f.numFunders].addr = msg.sender;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    f.funders[f.numFunders].amount = msg.value;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    // è€ƒè™‘æœ¬é¡¹ç›®æ˜¯å¦è¾¾æˆç›®æ ‡</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    f.success = f.amount &gt;= f.goal;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  // é€€é’±</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  function returnMoney(uint ID) public {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    require(ID &lt;= numFundings &amp;&amp; ID &gt;= 1);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    require(fundings[ID].success == false);</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    Funding storage f = fundings[ID];</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    for(uint i=1; i&lt;=f.numFunders; i++)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      if(f.funders[i].addr == msg.sender) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        f.funders[i].addr.transfer(f.funders[i].amount);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        f.funders[i].amount = 0;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        f.amount -= f.funders[i].amount;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  function newUse(uint ID, uint goal, string memory info) public {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    require(ID &lt;= numFundings &amp;&amp; ID &gt;= 1);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    require(fundings[ID].success == true);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    require(goal &lt;= fundings[ID].amount);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    require(msg.sender == fundings[ID].initiator);</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    Funding storage f = fundings[ID];</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    f.numUses = f.numUses + 1;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    f.uses[f.numUses].info = info;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    f.uses[f.numUses].goal = goal;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    f.uses[f.numUses].agreeAmount = 0;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    f.uses[f.numUses].disagree = 0;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    f.uses[f.numUses].over = false;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    f.amount = f.amount - goal;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  function agreeUse(uint ID, uint useID, bool agree) public {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    require(ID &lt;= numFundings &amp;&amp; ID &gt;= 1);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    require(useID &lt;= fundings[ID].numUses &amp;&amp; useID &gt;= 1);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    require(fundings[ID].uses[useID].over == false);</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    for(uint i=1; i&lt;=fundings[ID].numFunders; i++)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      if(fundings[ID].funders[i].addr == msg.sender) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        if(fundings[ID].uses[useID].agree[i] == 1) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">          fundings[ID].uses[useID].agreeAmount -= fundings[ID].funders[i].amount;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        } else if(fundings[ID].uses[useID].agree[i] == 2) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">          fundings[ID].uses[useID].disagree -= fundings[ID].funders[i].amount;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        if(agree) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">          fundings[ID].uses[useID].agreeAmount += fundings[ID].funders[i].amount;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">          fundings[ID].uses[useID].agree[i] = 1;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        else {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">          fundings[ID].uses[useID].disagree += fundings[ID].funders[i].amount;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">          fundings[ID].uses[useID].agree[i] = 2;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    checkUse(ID, useID);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  function checkUse(uint ID, uint useID) public {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    require(ID &lt;= numFundings &amp;&amp; ID &gt;= 1);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    require(fundings[ID].uses[useID].over == false);</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    if(fundings[ID].uses[useID].agreeAmount &gt;= fundings[ID].goal / 2) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      fundings[ID].uses[useID].over = true;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      fundings[ID].initiator.transfer(fundings[ID].uses[useID].goal);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    if(fundings[ID].uses[useID].disagree &gt; fundings[ID].goal / 2) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      fundings[ID].amount = fundings[ID].amount + fundings[ID].uses[useID].goal;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      fundings[ID].uses[useID].over = true;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  function getUseLength(uint ID) public view returns (uint) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    require(ID &lt;= numFundings &amp;&amp; ID &gt;= 1);</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    return fundings[ID].numUses;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  function getUse(uint ID, uint useID, address addr) public view returns (string memory, uint, uint, uint, bool, uint) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    require(ID &lt;= numFundings &amp;&amp; ID &gt;= 1);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    require(useID &lt;= fundings[ID].numUses &amp;&amp; useID &gt;= 1);</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    Use storage u = fundings[ID].uses[useID];</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    uint agree = 0;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    for(uint i=1; i&lt;=fundings[ID].numFunders; i++)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      if(fundings[ID].funders[i].addr == addr) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        agree = fundings[ID].uses[useID].agree[i];</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        break;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    return (u.info, u.goal, u.agreeAmount, u.disagree, u.over, agree);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  function getBalance() public view returns (uint) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    return address(this).balance;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span></span><span class="token-line" style="color:#393A34"><span class="token plain">  function getMyFundings(address addr, uint ID) public view returns (uint) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      uint res = 0;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      for(uint i=1; i&lt;=fundings[ID].numFunders; i++) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">          if(fundings[ID].funders[i].addr == addr)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            res += fundings[ID].funders[i].amount;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      return res;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  } </span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Solidity</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/rooctblog/docs/solidity/example/Helloworld">HelloWorld</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/rooctblog/">Stack Overflow</a></li></ul></div><div class="col footer__col"><div class="footer__title">Feature</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/rooctblog/">Feature</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/rooctblog/blog">Blog</a></li><li class="footer__item"><a class="footer__link-item" href="/rooctblog/">GitHub</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2022 dev site, Inc. Built with dev.</div></div></div></footer></div>
<script src="/rooctblog/assets/js/runtime~main.3733cacf.js"></script>
<script src="/rooctblog/assets/js/main.bdc4c2f6.js"></script>
</body>
</html>