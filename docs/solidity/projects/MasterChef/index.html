<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.6">
<link rel="alternate" type="application/rss+xml" href="/rooctblog/blog/rss.xml" title="Develop Site Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/rooctblog/blog/atom.xml" title="Develop Site Blog Atom Feed"><title data-react-helmet="true">MasterChef | Develop Site</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://rooct.github.io/rooctblog/docs/solidity/projects/MasterChef"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="MasterChef | Develop Site"><meta data-react-helmet="true" name="description" content="MasterChef"><meta data-react-helmet="true" property="og:description" content="MasterChef"><link data-react-helmet="true" rel="shortcut icon" href="/rooctblog/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://rooct.github.io/rooctblog/docs/solidity/projects/MasterChef"><link data-react-helmet="true" rel="alternate" href="https://rooct.github.io/rooctblog/docs/solidity/projects/MasterChef" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://rooct.github.io/rooctblog/docs/solidity/projects/MasterChef" hreflang="x-default"><link rel="stylesheet" href="/rooctblog/assets/css/styles.63c342b0.css">
<link rel="preload" href="/rooctblog/assets/js/runtime~main.11bca91f.js" as="script">
<link rel="preload" href="/rooctblog/assets/js/main.8817d7c2.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/rooctblog/"><img src="/rooctblog/img/logo.svg" alt="Dev Site Logo" class="themedImage_TMUO themedImage--light_4Vu1 navbar__logo"><img src="/rooctblog/img/logo.svg" alt="Dev Site Logo" class="themedImage_TMUO themedImage--dark_uzRr navbar__logo"><b class="navbar__title">Dev Site</b></a><a class="navbar__item navbar__link navbar__link--active" href="/rooctblog/docs/intro">Solidity</a><a class="navbar__item navbar__link" href="/rooctblog/docs/evm">EVM</a><a class="navbar__item navbar__link" href="/rooctblog/docs/dapp">Dapps</a><a class="navbar__item navbar__link" href="/rooctblog/docs/devtool">DevTools</a><a class="navbar__item navbar__link" href="/rooctblog/docs/daily">DailyTech</a><a class="navbar__item navbar__link" href="/rooctblog/blog">Blog</a></div><div class="navbar__items navbar__items--right"><div class="react-toggle toggle_2i4l react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_iYfV">🌜</span></div><div class="react-toggle-track-x"><span class="toggle_iYfV">🌞</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_lDyR"><button class="clean-btn backToTopButton_i9tI" type="button"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_0YBq"><div class="sidebar_a3j0"><nav class="menu thin-scrollbar menu_cyFh menuWithAnnouncementBar_+O1J"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist" href="#">Getting Start</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rooctblog/docs/intro">Intruduction</a></li></ul></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist" href="#">Api</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rooctblog/docs/solidity/api/Address">Address</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rooctblog/docs/solidity/api/BlockTx">Block &amp; Transaction</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rooctblog/docs/solidity/api/Contract">Contract</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rooctblog/docs/solidity/api/Crypto">Crypto</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rooctblog/docs/solidity/api/Error">Error</a></li></ul></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist" href="#">Example</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist" href="#" tabindex="0">App</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rooctblog/docs/solidity/example/app/BiDirectionalPaymentChannel">Bi-Directional Payment Channel</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rooctblog/docs/solidity/example/app/Create2">Create2</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rooctblog/docs/solidity/example/app/CrowdFund">Crowd Fund</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rooctblog/docs/solidity/example/app/DutchAuction">Dutch Auction</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rooctblog/docs/solidity/example/app/EnglishAuction">English Auction</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rooctblog/docs/solidity/example/app/Erc20">ERC20</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rooctblog/docs/solidity/example/app/Erc721">ERC721</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rooctblog/docs/solidity/example/app/EtherWallet">Ether Wallet</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rooctblog/docs/solidity/example/app/IterableMapping">Iterable Mapping</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rooctblog/docs/solidity/example/app/MerkleTree">Merkle Tree</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rooctblog/docs/solidity/example/app/MinimalProxy">Minimal Proxy Contract</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rooctblog/docs/solidity/example/app/MultiDelegatecall">Multi Delegatecall</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rooctblog/docs/solidity/example/app/Muticall">Multi Call</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rooctblog/docs/solidity/example/app/MutiSignWallet">Multi-Sig Wallet</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rooctblog/docs/solidity/example/app/Proxy">Proxy</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rooctblog/docs/solidity/example/app/Slot">Slot</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rooctblog/docs/solidity/example/app/UniDirectionalPaymentChannel">Uni-Directional Payment Channel</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rooctblog/docs/solidity/example/app/UpgradeableProxy">Upgradeable Proxy</a></li></ul></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Defi</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rooctblog/docs/solidity/example/defi/Chainlink">Chainlink Price Oracle</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rooctblog/docs/solidity/example/defi/CPAMM">Constant Product AMM</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rooctblog/docs/solidity/example/defi/CSamm">Constant Sum AMM</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rooctblog/docs/solidity/example/defi/Liquidity">Uniswap V2 Add Remove Liquidity</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rooctblog/docs/solidity/example/defi/Optimal">Uniswap V2 Optimal One Sided Supply</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rooctblog/docs/solidity/example/defi/StakingRewards">Staking Rewards</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rooctblog/docs/solidity/example/defi/Swap">Uniswap V2 Swap</a></li></ul></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Practice</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rooctblog/docs/solidity/example/practice/PiggyBank">PiggyBank</a></li></ul></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rooctblog/docs/solidity/example/AbiDecode">ABI Decode</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rooctblog/docs/solidity/example/AccountFactory">AccountFactory</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rooctblog/docs/solidity/example/Array">Array</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rooctblog/docs/solidity/example/BlockTimesatmp">Block Timestamp Manipulation</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rooctblog/docs/solidity/example/Call">Call</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rooctblog/docs/solidity/example/CallingContract">Calling Other Contract</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rooctblog/docs/solidity/example/Constants">Constants</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rooctblog/docs/solidity/example/Constructor">Constructor</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rooctblog/docs/solidity/example/ContractSize">Bypass Contract Size Check</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rooctblog/docs/solidity/example/Counter">First Application</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rooctblog/docs/solidity/example/DataLocations">Data Locations - Storage, Memory and Calldata</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rooctblog/docs/solidity/example/Delegatecall">Delegatecall</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rooctblog/docs/solidity/example/DelegateCallAtack">DelegatecallAttack</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rooctblog/docs/solidity/example/DenialOfSevice">Denial of Service</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rooctblog/docs/solidity/example/Echidna">Echidna</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rooctblog/docs/solidity/example/Enum">Enum</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rooctblog/docs/solidity/example/Error">Error</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rooctblog/docs/solidity/example/EtherUnits">Ether and Wei</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rooctblog/docs/solidity/example/Events">Events</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rooctblog/docs/solidity/example/ExternalContract">Hiding Malicious Code with External Contract</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rooctblog/docs/solidity/example/Fallback">Fallback</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rooctblog/docs/solidity/example/FrontRunning">Front Running</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rooctblog/docs/solidity/example/Function">Function</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rooctblog/docs/solidity/example/FunctionModifier">Function Modifier</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rooctblog/docs/solidity/example/FunctionSelector">Function Selector</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rooctblog/docs/solidity/example/Gas">Gas</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rooctblog/docs/solidity/example/Hash">Hash</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rooctblog/docs/solidity/example/Helloworld">Hello World</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rooctblog/docs/solidity/example/HoneyPot">Honeypot</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rooctblog/docs/solidity/example/IfElse">If / Else</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rooctblog/docs/solidity/example/Immutable">Immutable</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rooctblog/docs/solidity/example/Import">Import</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rooctblog/docs/solidity/example/Inheritance">Inheritance</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rooctblog/docs/solidity/example/Interface">Interface</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rooctblog/docs/solidity/example/Keccak256">Hashing with Keccak256</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rooctblog/docs/solidity/example/Kill">Kill</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rooctblog/docs/solidity/example/Library">Library</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rooctblog/docs/solidity/example/Loop">For and While Loop</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rooctblog/docs/solidity/example/Mapping">Mapping</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rooctblog/docs/solidity/example/NewContract">Contract that Creates other Contracts</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rooctblog/docs/solidity/example/NFTMultiMint">科学家NFT批量抢购</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rooctblog/docs/solidity/example/Overflow">Arithmetic Overflow and Underflow</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rooctblog/docs/solidity/example/Payable">Payable</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rooctblog/docs/solidity/example/Primitives">Primitive Data Types</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rooctblog/docs/solidity/example/Randomness">Source of Randomness</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rooctblog/docs/solidity/example/ReEntrancy">Re-Entrancy</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rooctblog/docs/solidity/example/SelfDestruct">Self Destruct</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rooctblog/docs/solidity/example/SendingEther">Sending Ether (transfer, send, call)</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rooctblog/docs/solidity/example/Shadow">Shadowing Inherited State Variables</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rooctblog/docs/solidity/example/Signature">Verifying Signature</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rooctblog/docs/solidity/example/SignatureReplay">Signature Replay</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rooctblog/docs/solidity/example/SimpleStorage">Reading and Writing to a State Variable</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rooctblog/docs/solidity/example/Structs">Structs</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rooctblog/docs/solidity/example/Super">Calling Parent Contracts</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rooctblog/docs/solidity/example/TryCatch">Try Catch</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rooctblog/docs/solidity/example/TxOrigin">Phishing with tx.origin</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rooctblog/docs/solidity/example/Variables">Variables</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rooctblog/docs/solidity/example/Vault">Accessing Private Data</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rooctblog/docs/solidity/example/ViewAndPureFunctions">View and Pure Functions</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rooctblog/docs/solidity/example/Visibility">Visibility</a></li></ul></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Projects</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rooctblog/docs/solidity/projects/BabyToken">BabyToken</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rooctblog/docs/solidity/projects/Five">Five</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/rooctblog/docs/solidity/projects/MasterChef">MasterChef</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rooctblog/docs/solidity/projects/SushiBar">SushiBar</a></li></ul></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist" href="#">Utils</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/rooctblog/docs/solidity/utils/Verify">Solidity签名验证</a></li></ul></li></ul></nav></div></aside><main class="docMainContainer_r8cw"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><div class="theme-doc-markdown markdown"><header><h1>MasterChef</h1></header><p><strong>特点</strong></p><ul><li>每秒产出</li><li>加权均分</li><li>收益由挖矿产出</li><li>固定期限内可参与头矿</li><li>管理员设置多个池子，修改收益比率</li></ul><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">/**</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> *Submitted for verification at Etherscan.io on 2020-08-26</span></span><span class="token-line" style="color:#393A34"><span class="token plain">*/</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">// File: @openzeppelin/contracts/token/ERC20/IERC20.sol</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">pragma solidity ^0.6.0;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">/**</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> * @dev Interface of the ERC20 standard as defined in the EIP.</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span></span><span class="token-line" style="color:#393A34"><span class="token plain">interface IERC20 {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @dev Returns the amount of tokens in existence.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    function totalSupply() external view returns (uint256);</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @dev Returns the amount of tokens owned by `account`.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    function balanceOf(address account) external view returns (uint256);</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @dev Moves `amount` tokens from the caller&#x27;s account to `recipient`.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     *</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * Returns a boolean value indicating whether the operation succeeded.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     *</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * Emits a {Transfer} event.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    function transfer(address recipient, uint256 amount) external returns (bool);</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @dev Returns the remaining number of tokens that `spender` will be</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * allowed to spend on behalf of `owner` through {transferFrom}. This is</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * zero by default.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     *</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * This value changes when {approve} or {transferFrom} are called.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    function allowance(address owner, address spender) external view returns (uint256);</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @dev Sets `amount` as the allowance of `spender` over the caller&#x27;s tokens.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     *</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * Returns a boolean value indicating whether the operation succeeded.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     *</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * IMPORTANT: Beware that changing an allowance with this method brings the risk</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * that someone may use both the old and the new allowance by unfortunate</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * transaction ordering. One possible solution to mitigate this race</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * condition is to first reduce the spender&#x27;s allowance to 0 and set the</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * desired value afterwards:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * https://github.com/ethereum/EIPs/issues/20#issuecomment-263524729</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     *</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * Emits an {Approval} event.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    function approve(address spender, uint256 amount) external returns (bool);</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @dev Moves `amount` tokens from `sender` to `recipient` using the</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * allowance mechanism. `amount` is then deducted from the caller&#x27;s</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * allowance.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     *</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * Returns a boolean value indicating whether the operation succeeded.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     *</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * Emits a {Transfer} event.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    function transferFrom(address sender, address recipient, uint256 amount) external returns (bool);</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @dev Emitted when `value` tokens are moved from one account (`from`) to</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * another (`to`).</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     *</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * Note that `value` may be zero.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    event Transfer(address indexed from, address indexed to, uint256 value);</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @dev Emitted when the allowance of a `spender` for an `owner` is set by</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * a call to {approve}. `value` is the new allowance.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    event Approval(address indexed owner, address indexed spender, uint256 value);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">// File: @openzeppelin/contracts/math/SafeMath.sol</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">pragma solidity ^0.6.0;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">/**</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> * @dev Wrappers over Solidity&#x27;s arithmetic operations with added overflow</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> * checks.</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> *</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> * Arithmetic operations in Solidity wrap on overflow. This can easily result</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> * in bugs, because programmers usually assume that an overflow raises an</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> * error, which is the standard behavior in high level programming languages.</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> * `SafeMath` restores this intuition by reverting the transaction when an</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> * operation overflows.</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> *</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> * Using this library instead of the unchecked operations eliminates an entire</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> * class of bugs, so it&#x27;s recommended to use it always.</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span></span><span class="token-line" style="color:#393A34"><span class="token plain">library SafeMath {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @dev Returns the addition of two unsigned integers, reverting on</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * overflow.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     *</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * Counterpart to Solidity&#x27;s `+` operator.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     *</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * Requirements:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     *</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * - Addition cannot overflow.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    function add(uint256 a, uint256 b) internal pure returns (uint256) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        uint256 c = a + b;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        require(c &gt;= a, &quot;SafeMath: addition overflow&quot;);</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        return c;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @dev Returns the subtraction of two unsigned integers, reverting on</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * overflow (when the result is negative).</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     *</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * Counterpart to Solidity&#x27;s `-` operator.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     *</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * Requirements:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     *</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * - Subtraction cannot overflow.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    function sub(uint256 a, uint256 b) internal pure returns (uint256) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        return sub(a, b, &quot;SafeMath: subtraction overflow&quot;);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @dev Returns the subtraction of two unsigned integers, reverting with custom message on</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * overflow (when the result is negative).</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     *</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * Counterpart to Solidity&#x27;s `-` operator.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     *</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * Requirements:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     *</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * - Subtraction cannot overflow.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    function sub(uint256 a, uint256 b, string memory errorMessage) internal pure returns (uint256) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        require(b &lt;= a, errorMessage);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        uint256 c = a - b;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        return c;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @dev Returns the multiplication of two unsigned integers, reverting on</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * overflow.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     *</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * Counterpart to Solidity&#x27;s `*` operator.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     *</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * Requirements:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     *</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * - Multiplication cannot overflow.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    function mul(uint256 a, uint256 b) internal pure returns (uint256) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Gas optimization: this is cheaper than requiring &#x27;a&#x27; not being zero, but the</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        // benefit is lost if &#x27;b&#x27; is also tested.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        // See: https://github.com/OpenZeppelin/openzeppelin-contracts/pull/522</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (a == 0) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            return 0;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        uint256 c = a * b;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        require(c / a == b, &quot;SafeMath: multiplication overflow&quot;);</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        return c;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @dev Returns the integer division of two unsigned integers. Reverts on</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * division by zero. The result is rounded towards zero.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     *</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * Counterpart to Solidity&#x27;s `/` operator. Note: this function uses a</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * `revert` opcode (which leaves remaining gas untouched) while Solidity</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * uses an invalid opcode to revert (consuming all remaining gas).</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     *</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * Requirements:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     *</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * - The divisor cannot be zero.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    function div(uint256 a, uint256 b) internal pure returns (uint256) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        return div(a, b, &quot;SafeMath: division by zero&quot;);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @dev Returns the integer division of two unsigned integers. Reverts with custom message on</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * division by zero. The result is rounded towards zero.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     *</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * Counterpart to Solidity&#x27;s `/` operator. Note: this function uses a</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * `revert` opcode (which leaves remaining gas untouched) while Solidity</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * uses an invalid opcode to revert (consuming all remaining gas).</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     *</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * Requirements:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     *</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * - The divisor cannot be zero.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    function div(uint256 a, uint256 b, string memory errorMessage) internal pure returns (uint256) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        require(b &gt; 0, errorMessage);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        uint256 c = a / b;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        // assert(a == b * c + a % b); // There is no case in which this doesn&#x27;t hold</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        return c;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @dev Returns the remainder of dividing two unsigned integers. (unsigned integer modulo),</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * Reverts when dividing by zero.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     *</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * Counterpart to Solidity&#x27;s `%` operator. This function uses a `revert`</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * opcode (which leaves remaining gas untouched) while Solidity uses an</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * invalid opcode to revert (consuming all remaining gas).</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     *</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * Requirements:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     *</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * - The divisor cannot be zero.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    function mod(uint256 a, uint256 b) internal pure returns (uint256) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        return mod(a, b, &quot;SafeMath: modulo by zero&quot;);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @dev Returns the remainder of dividing two unsigned integers. (unsigned integer modulo),</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * Reverts with custom message when dividing by zero.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     *</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * Counterpart to Solidity&#x27;s `%` operator. This function uses a `revert`</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * opcode (which leaves remaining gas untouched) while Solidity uses an</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * invalid opcode to revert (consuming all remaining gas).</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     *</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * Requirements:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     *</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * - The divisor cannot be zero.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    function mod(uint256 a, uint256 b, string memory errorMessage) internal pure returns (uint256) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        require(b != 0, errorMessage);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        return a % b;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">// File: @openzeppelin/contracts/utils/Address.sol</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">pragma solidity ^0.6.2;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">/**</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> * @dev Collection of functions related to the address type</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span></span><span class="token-line" style="color:#393A34"><span class="token plain">library Address {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @dev Returns true if `account` is a contract.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     *</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * [IMPORTANT]</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * ====</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * It is unsafe to assume that an address for which this function returns</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * false is an externally-owned account (EOA) and not a contract.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     *</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * Among others, `isContract` will return false for the following</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * types of addresses:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     *</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     *  - an externally-owned account</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     *  - a contract in construction</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     *  - an address where a contract will be created</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     *  - an address where a contract lived, but was destroyed</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * ====</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    function isContract(address account) internal view returns (bool) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        // According to EIP-1052, 0x0 is the value returned for not-yet created accounts</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        // and 0xc5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470 is returned</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        // for accounts without code, i.e. `keccak256(&#x27;&#x27;)`</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        bytes32 codehash;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        bytes32 accountHash = 0xc5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        // solhint-disable-next-line no-inline-assembly</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        assembly { codehash := extcodehash(account) }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        return (codehash != accountHash &amp;&amp; codehash != 0x0);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @dev Replacement for Solidity&#x27;s `transfer`: sends `amount` wei to</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * `recipient`, forwarding all available gas and reverting on errors.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     *</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * https://eips.ethereum.org/EIPS/eip-1884[EIP1884] increases the gas cost</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * of certain opcodes, possibly making contracts go over the 2300 gas limit</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * imposed by `transfer`, making them unable to receive funds via</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * `transfer`. {sendValue} removes this limitation.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     *</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * https://diligence.consensys.net/posts/2019/09/stop-using-soliditys-transfer-now/[Learn more].</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     *</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * IMPORTANT: because control is transferred to `recipient`, care must be</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * taken to not create reentrancy vulnerabilities. Consider using</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * {ReentrancyGuard} or the</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * https://solidity.readthedocs.io/en/v0.5.11/security-considerations.html#use-the-checks-effects-interactions-pattern[checks-effects-interactions pattern].</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    function sendValue(address payable recipient, uint256 amount) internal {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        require(address(this).balance &gt;= amount, &quot;Address: insufficient balance&quot;);</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        // solhint-disable-next-line avoid-low-level-calls, avoid-call-value</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        (bool success, ) = recipient.call{ value: amount }(&quot;&quot;);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        require(success, &quot;Address: unable to send value, recipient may have reverted&quot;);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @dev Performs a Solidity function call using a low level `call`. A</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * plain`call` is an unsafe replacement for a function call: use this</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * function instead.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     *</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * If `target` reverts with a revert reason, it is bubbled up by this</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * function (like regular Solidity function calls).</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     *</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * Returns the raw returned data. To convert to the expected return value,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * use https://solidity.readthedocs.io/en/latest/units-and-global-variables.html?highlight=abi.decode#abi-encoding-and-decoding-functions[`abi.decode`].</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     *</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * Requirements:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     *</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * - `target` must be a contract.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * - calling `target` with `data` must not revert.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     *</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * _Available since v3.1._</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    function functionCall(address target, bytes memory data) internal returns (bytes memory) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      return functionCall(target, data, &quot;Address: low-level call failed&quot;);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @dev Same as {xref-Address-functionCall-address-bytes-}[`functionCall`], but with</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * `errorMessage` as a fallback revert reason when `target` reverts.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     *</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * _Available since v3.1._</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    function functionCall(address target, bytes memory data, string memory errorMessage) internal returns (bytes memory) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        return _functionCallWithValue(target, data, 0, errorMessage);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @dev Same as {xref-Address-functionCall-address-bytes-}[`functionCall`],</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * but also transferring `value` wei to `target`.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     *</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * Requirements:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     *</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * - the calling contract must have an ETH balance of at least `value`.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * - the called Solidity function must be `payable`.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     *</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * _Available since v3.1._</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    function functionCallWithValue(address target, bytes memory data, uint256 value) internal returns (bytes memory) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        return functionCallWithValue(target, data, value, &quot;Address: low-level call with value failed&quot;);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @dev Same as {xref-Address-functionCallWithValue-address-bytes-uint256-}[`functionCallWithValue`], but</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * with `errorMessage` as a fallback revert reason when `target` reverts.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     *</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * _Available since v3.1._</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    function functionCallWithValue(address target, bytes memory data, uint256 value, string memory errorMessage) internal returns (bytes memory) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        require(address(this).balance &gt;= value, &quot;Address: insufficient balance for call&quot;);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        return _functionCallWithValue(target, data, value, errorMessage);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    function _functionCallWithValue(address target, bytes memory data, uint256 weiValue, string memory errorMessage) private returns (bytes memory) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        require(isContract(target), &quot;Address: call to non-contract&quot;);</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        // solhint-disable-next-line avoid-low-level-calls</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        (bool success, bytes memory returndata) = target.call{ value: weiValue }(data);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (success) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            return returndata;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        } else {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            // Look for revert reason and bubble it up if present</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (returndata.length &gt; 0) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                // The easiest way to bubble the revert reason is using memory via assembly</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                // solhint-disable-next-line no-inline-assembly</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                assembly {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                    let returndata_size := mload(returndata)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                    revert(add(32, returndata), returndata_size)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            } else {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                revert(errorMessage);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">// File: @openzeppelin/contracts/token/ERC20/SafeERC20.sol</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">pragma solidity ^0.6.0;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">/**</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> * @title SafeERC20</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> * @dev Wrappers around ERC20 operations that throw on failure (when the token</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> * contract returns false). Tokens that return no value (and instead revert or</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> * throw on failure) are also supported, non-reverting calls are assumed to be</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> * successful.</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> * To use this library you can add a `using SafeERC20 for IERC20;` statement to your contract,</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> * which allows you to call the safe operations as `token.safeTransfer(...)`, etc.</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span></span><span class="token-line" style="color:#393A34"><span class="token plain">library SafeERC20 {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    using SafeMath for uint256;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    using Address for address;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    function safeTransfer(IERC20 token, address to, uint256 value) internal {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        _callOptionalReturn(token, abi.encodeWithSelector(token.transfer.selector, to, value));</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    function safeTransferFrom(IERC20 token, address from, address to, uint256 value) internal {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        _callOptionalReturn(token, abi.encodeWithSelector(token.transferFrom.selector, from, to, value));</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @dev Deprecated. This function has issues similar to the ones found in</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * {IERC20-approve}, and its usage is discouraged.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     *</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * Whenever possible, use {safeIncreaseAllowance} and</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * {safeDecreaseAllowance} instead.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    function safeApprove(IERC20 token, address spender, uint256 value) internal {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        // safeApprove should only be called when setting an initial allowance,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        // or when resetting it to zero. To increase and decrease it, use</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        // &#x27;safeIncreaseAllowance&#x27; and &#x27;safeDecreaseAllowance&#x27;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        // solhint-disable-next-line max-line-length</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        require((value == 0) || (token.allowance(address(this), spender) == 0),</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;SafeERC20: approve from non-zero to non-zero allowance&quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        );</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        _callOptionalReturn(token, abi.encodeWithSelector(token.approve.selector, spender, value));</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    function safeIncreaseAllowance(IERC20 token, address spender, uint256 value) internal {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        uint256 newAllowance = token.allowance(address(this), spender).add(value);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        _callOptionalReturn(token, abi.encodeWithSelector(token.approve.selector, spender, newAllowance));</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    function safeDecreaseAllowance(IERC20 token, address spender, uint256 value) internal {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        uint256 newAllowance = token.allowance(address(this), spender).sub(value, &quot;SafeERC20: decreased allowance below zero&quot;);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        _callOptionalReturn(token, abi.encodeWithSelector(token.approve.selector, spender, newAllowance));</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @dev Imitates a Solidity high-level call (i.e. a regular function call to a contract), relaxing the requirement</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * on the return value: the return value is optional (but if data is returned, it must not be false).</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @param token The token targeted by the call.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @param data The call data (encoded using abi.encode or one of its variants).</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    function _callOptionalReturn(IERC20 token, bytes memory data) private {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        // We need to perform a low level call here, to bypass Solidity&#x27;s return data size checking mechanism, since</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        // we&#x27;re implementing it ourselves. We use {Address.functionCall} to perform this call, which verifies that</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        // the target address contains contract code and also asserts for success in the low-level call.</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        bytes memory returndata = address(token).functionCall(data, &quot;SafeERC20: low-level call failed&quot;);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (returndata.length &gt; 0) { // Return data is optional</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            // solhint-disable-next-line max-line-length</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            require(abi.decode(returndata, (bool)), &quot;SafeERC20: ERC20 operation did not succeed&quot;);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">// File: @openzeppelin/contracts/utils/EnumerableSet.sol</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">pragma solidity ^0.6.0;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">/**</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> * @dev Library for managing</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> * https://en.wikipedia.org/wiki/Set_(abstract_data_type)[sets] of primitive</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> * types.</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> *</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> * Sets have the following properties:</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> *</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> * - Elements are added, removed, and checked for existence in constant time</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> * (O(1)).</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> * - Elements are enumerated in O(n). No guarantees are made on the ordering.</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> *</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> * ```</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> * contract Example {</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> *     // Add the library methods</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> *     using EnumerableSet for EnumerableSet.AddressSet;</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> *</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> *     // Declare a set state variable</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> *     EnumerableSet.AddressSet private mySet;</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> * }</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> * ```</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> *</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> * As of v3.0.0, only sets of type `address` (`AddressSet`) and `uint256`</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> * (`UintSet`) are supported.</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span></span><span class="token-line" style="color:#393A34"><span class="token plain">library EnumerableSet {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    // To implement this library for multiple types with as little code</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    // repetition as possible, we write it in terms of a generic Set type with</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    // bytes32 values.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    // The Set implementation uses private functions, and user-facing</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    // implementations (such as AddressSet) are just wrappers around the</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    // underlying Set.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    // This means that we can only create new EnumerableSets for types that fit</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    // in bytes32.</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    struct Set {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Storage of set values</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        bytes32[] _values;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Position of the value in the `values` array, plus 1 because index 0</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        // means a value is not in the set.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        mapping (bytes32 =&gt; uint256) _indexes;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @dev Add a value to a set. O(1).</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     *</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * Returns true if the value was added to the set, that is if it was not</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * already present.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    function _add(Set storage set, bytes32 value) private returns (bool) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (!_contains(set, value)) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            set._values.push(value);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            // The value is stored at length-1, but we add 1 to all indexes</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            // and use 0 as a sentinel value</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            set._indexes[value] = set._values.length;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            return true;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        } else {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            return false;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @dev Removes a value from a set. O(1).</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     *</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * Returns true if the value was removed from the set, that is if it was</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * present.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    function _remove(Set storage set, bytes32 value) private returns (bool) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        // We read and store the value&#x27;s index to prevent multiple reads from the same storage slot</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        uint256 valueIndex = set._indexes[value];</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (valueIndex != 0) { // Equivalent to contains(set, value)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            // To delete an element from the _values array in O(1), we swap the element to delete with the last one in</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            // the array, and then remove the last element (sometimes called as &#x27;swap and pop&#x27;).</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            // This modifies the order of the array, as noted in {at}.</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            uint256 toDeleteIndex = valueIndex - 1;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            uint256 lastIndex = set._values.length - 1;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            // When the value to delete is the last one, the swap operation is unnecessary. However, since this occurs</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            // so rarely, we still do the swap anyway to avoid the gas cost of adding an &#x27;if&#x27; statement.</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            bytes32 lastvalue = set._values[lastIndex];</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            // Move the last value to the index where the value to delete is</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            set._values[toDeleteIndex] = lastvalue;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            // Update the index for the moved value</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            set._indexes[lastvalue] = toDeleteIndex + 1; // All indexes are 1-based</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            // Delete the slot where the moved value was stored</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            set._values.pop();</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            // Delete the index for the deleted slot</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            delete set._indexes[value];</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            return true;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        } else {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            return false;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @dev Returns true if the value is in the set. O(1).</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    function _contains(Set storage set, bytes32 value) private view returns (bool) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        return set._indexes[value] != 0;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @dev Returns the number of values on the set. O(1).</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    function _length(Set storage set) private view returns (uint256) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        return set._values.length;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">   /**</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    * @dev Returns the value stored at position `index` in the set. O(1).</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    *</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    * Note that there are no guarantees on the ordering of values inside the</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    * array, and it may change when more values are added or removed.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    *</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    * Requirements:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    *</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    * - `index` must be strictly less than {length}.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    */</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    function _at(Set storage set, uint256 index) private view returns (bytes32) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        require(set._values.length &gt; index, &quot;EnumerableSet: index out of bounds&quot;);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        return set._values[index];</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    // AddressSet</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    struct AddressSet {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        Set _inner;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @dev Add a value to a set. O(1).</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     *</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * Returns true if the value was added to the set, that is if it was not</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * already present.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    function add(AddressSet storage set, address value) internal returns (bool) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        return _add(set._inner, bytes32(uint256(value)));</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @dev Removes a value from a set. O(1).</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     *</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * Returns true if the value was removed from the set, that is if it was</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * present.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    function remove(AddressSet storage set, address value) internal returns (bool) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        return _remove(set._inner, bytes32(uint256(value)));</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @dev Returns true if the value is in the set. O(1).</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    function contains(AddressSet storage set, address value) internal view returns (bool) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        return _contains(set._inner, bytes32(uint256(value)));</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @dev Returns the number of values in the set. O(1).</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    function length(AddressSet storage set) internal view returns (uint256) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        return _length(set._inner);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">   /**</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    * @dev Returns the value stored at position `index` in the set. O(1).</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    *</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    * Note that there are no guarantees on the ordering of values inside the</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    * array, and it may change when more values are added or removed.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    *</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    * Requirements:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    *</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    * - `index` must be strictly less than {length}.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    */</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    function at(AddressSet storage set, uint256 index) internal view returns (address) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        return address(uint256(_at(set._inner, index)));</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    // UintSet</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    struct UintSet {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        Set _inner;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @dev Add a value to a set. O(1).</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     *</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * Returns true if the value was added to the set, that is if it was not</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * already present.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    function add(UintSet storage set, uint256 value) internal returns (bool) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        return _add(set._inner, bytes32(value));</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @dev Removes a value from a set. O(1).</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     *</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * Returns true if the value was removed from the set, that is if it was</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * present.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    function remove(UintSet storage set, uint256 value) internal returns (bool) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        return _remove(set._inner, bytes32(value));</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @dev Returns true if the value is in the set. O(1).</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    function contains(UintSet storage set, uint256 value) internal view returns (bool) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        return _contains(set._inner, bytes32(value));</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @dev Returns the number of values on the set. O(1).</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    function length(UintSet storage set) internal view returns (uint256) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        return _length(set._inner);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">   /**</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    * @dev Returns the value stored at position `index` in the set. O(1).</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    *</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    * Note that there are no guarantees on the ordering of values inside the</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    * array, and it may change when more values are added or removed.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    *</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    * Requirements:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    *</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    * - `index` must be strictly less than {length}.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    */</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    function at(UintSet storage set, uint256 index) internal view returns (uint256) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        return uint256(_at(set._inner, index));</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">// File: @openzeppelin/contracts/GSN/Context.sol</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">pragma solidity ^0.6.0;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">/*</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> * @dev Provides information about the current execution context, including the</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> * sender of the transaction and its data. While these are generally available</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> * via msg.sender and msg.data, they should not be accessed in such a direct</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> * manner, since when dealing with GSN meta-transactions the account sending and</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> * paying for execution may not be the actual sender (as far as an application</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> * is concerned).</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> *</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> * This contract is only required for intermediate, library-like contracts.</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span></span><span class="token-line" style="color:#393A34"><span class="token plain">abstract contract Context {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    function _msgSender() internal view virtual returns (address payable) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        return msg.sender;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    function _msgData() internal view virtual returns (bytes memory) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        this; // silence state mutability warning without generating bytecode - see https://github.com/ethereum/solidity/issues/2691</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        return msg.data;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">// File: @openzeppelin/contracts/access/Ownable.sol</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">pragma solidity ^0.6.0;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">/**</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> * @dev Contract module which provides a basic access control mechanism, where</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> * there is an account (an owner) that can be granted exclusive access to</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> * specific functions.</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> *</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> * By default, the owner account will be the one that deploys the contract. This</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> * can later be changed with {transferOwnership}.</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> *</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> * This module is used through inheritance. It will make available the modifier</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> * `onlyOwner`, which can be applied to your functions to restrict their use to</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> * the owner.</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span></span><span class="token-line" style="color:#393A34"><span class="token plain">contract Ownable is Context {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    address private _owner;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    event OwnershipTransferred(address indexed previousOwner, address indexed newOwner);</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @dev Initializes the contract setting the deployer as the initial owner.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    constructor () internal {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        address msgSender = _msgSender();</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        _owner = msgSender;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        emit OwnershipTransferred(address(0), msgSender);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @dev Returns the address of the current owner.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    function owner() public view returns (address) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        return _owner;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @dev Throws if called by any account other than the owner.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    modifier onlyOwner() {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        require(_owner == _msgSender(), &quot;Ownable: caller is not the owner&quot;);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        _;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @dev Leaves the contract without owner. It will not be possible to call</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * `onlyOwner` functions anymore. Can only be called by the current owner.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     *</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * NOTE: Renouncing ownership will leave the contract without an owner,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * thereby removing any functionality that is only available to the owner.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    function renounceOwnership() public virtual onlyOwner {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        emit OwnershipTransferred(_owner, address(0));</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        _owner = address(0);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @dev Transfers ownership of the contract to a new account (`newOwner`).</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * Can only be called by the current owner.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    function transferOwnership(address newOwner) public virtual onlyOwner {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        require(newOwner != address(0), &quot;Ownable: new owner is the zero address&quot;);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        emit OwnershipTransferred(_owner, newOwner);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        _owner = newOwner;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">// File: @openzeppelin/contracts/token/ERC20/ERC20.sol</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">pragma solidity ^0.6.0;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">/**</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> * @dev Implementation of the {IERC20} interface.</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> *</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> * This implementation is agnostic to the way tokens are created. This means</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> * that a supply mechanism has to be added in a derived contract using {_mint}.</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> * For a generic mechanism see {ERC20PresetMinterPauser}.</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> *</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> * TIP: For a detailed writeup see our guide</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> * https://forum.zeppelin.solutions/t/how-to-implement-erc20-supply-mechanisms/226[How</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> * to implement supply mechanisms].</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> *</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> * We have followed general OpenZeppelin guidelines: functions revert instead</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> * of returning `false` on failure. This behavior is nonetheless conventional</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> * and does not conflict with the expectations of ERC20 applications.</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> *</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> * Additionally, an {Approval} event is emitted on calls to {transferFrom}.</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> * This allows applications to reconstruct the allowance for all accounts just</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> * by listening to said events. Other implementations of the EIP may not emit</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> * these events, as it isn&#x27;t required by the specification.</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> *</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> * Finally, the non-standard {decreaseAllowance} and {increaseAllowance}</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> * functions have been added to mitigate the well-known issues around setting</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> * allowances. See {IERC20-approve}.</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span></span><span class="token-line" style="color:#393A34"><span class="token plain">contract ERC20 is Context, IERC20 {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    using SafeMath for uint256;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    using Address for address;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    mapping (address =&gt; uint256) private _balances;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    mapping (address =&gt; mapping (address =&gt; uint256)) private _allowances;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    uint256 private _totalSupply;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    string private _name;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    string private _symbol;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    uint8 private _decimals;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @dev Sets the values for {name} and {symbol}, initializes {decimals} with</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * a default value of 18.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     *</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * To select a different value for {decimals}, use {_setupDecimals}.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     *</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * All three of these values are immutable: they can only be set once during</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * construction.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    constructor (string memory name, string memory symbol) public {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        _name = name;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        _symbol = symbol;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        _decimals = 18;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @dev Returns the name of the token.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    function name() public view returns (string memory) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        return _name;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @dev Returns the symbol of the token, usually a shorter version of the</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * name.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    function symbol() public view returns (string memory) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        return _symbol;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @dev Returns the number of decimals used to get its user representation.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * For example, if `decimals` equals `2`, a balance of `505` tokens should</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * be displayed to a user as `5,05` (`505 / 10 ** 2`).</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     *</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * Tokens usually opt for a value of 18, imitating the relationship between</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * Ether and Wei. This is the value {ERC20} uses, unless {_setupDecimals} is</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * called.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     *</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * NOTE: This information is only used for _display_ purposes: it in</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * no way affects any of the arithmetic of the contract, including</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * {IERC20-balanceOf} and {IERC20-transfer}.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    function decimals() public view returns (uint8) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        return _decimals;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @dev See {IERC20-totalSupply}.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    function totalSupply() public view override returns (uint256) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        return _totalSupply;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @dev See {IERC20-balanceOf}.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    function balanceOf(address account) public view override returns (uint256) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        return _balances[account];</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @dev See {IERC20-transfer}.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     *</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * Requirements:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     *</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * - `recipient` cannot be the zero address.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * - the caller must have a balance of at least `amount`.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    function transfer(address recipient, uint256 amount) public virtual override returns (bool) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        _transfer(_msgSender(), recipient, amount);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        return true;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @dev See {IERC20-allowance}.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    function allowance(address owner, address spender) public view virtual override returns (uint256) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        return _allowances[owner][spender];</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @dev See {IERC20-approve}.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     *</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * Requirements:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     *</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * - `spender` cannot be the zero address.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    function approve(address spender, uint256 amount) public virtual override returns (bool) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        _approve(_msgSender(), spender, amount);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        return true;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @dev See {IERC20-transferFrom}.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     *</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * Emits an {Approval} event indicating the updated allowance. This is not</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * required by the EIP. See the note at the beginning of {ERC20};</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     *</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * Requirements:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * - `sender` and `recipient` cannot be the zero address.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * - `sender` must have a balance of at least `amount`.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * - the caller must have allowance for ``sender``&#x27;s tokens of at least</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * `amount`.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    function transferFrom(address sender, address recipient, uint256 amount) public virtual override returns (bool) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        _transfer(sender, recipient, amount);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        _approve(sender, _msgSender(), _allowances[sender][_msgSender()].sub(amount, &quot;ERC20: transfer amount exceeds allowance&quot;));</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        return true;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @dev Atomically increases the allowance granted to `spender` by the caller.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     *</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * This is an alternative to {approve} that can be used as a mitigation for</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * problems described in {IERC20-approve}.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     *</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * Emits an {Approval} event indicating the updated allowance.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     *</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * Requirements:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     *</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * - `spender` cannot be the zero address.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    function increaseAllowance(address spender, uint256 addedValue) public virtual returns (bool) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        _approve(_msgSender(), spender, _allowances[_msgSender()][spender].add(addedValue));</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        return true;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @dev Atomically decreases the allowance granted to `spender` by the caller.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     *</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * This is an alternative to {approve} that can be used as a mitigation for</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * problems described in {IERC20-approve}.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     *</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * Emits an {Approval} event indicating the updated allowance.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     *</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * Requirements:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     *</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * - `spender` cannot be the zero address.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * - `spender` must have allowance for the caller of at least</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * `subtractedValue`.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    function decreaseAllowance(address spender, uint256 subtractedValue) public virtual returns (bool) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        _approve(_msgSender(), spender, _allowances[_msgSender()][spender].sub(subtractedValue, &quot;ERC20: decreased allowance below zero&quot;));</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        return true;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @dev Moves tokens `amount` from `sender` to `recipient`.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     *</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * This is internal function is equivalent to {transfer}, and can be used to</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * e.g. implement automatic token fees, slashing mechanisms, etc.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     *</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * Emits a {Transfer} event.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     *</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * Requirements:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     *</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * - `sender` cannot be the zero address.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * - `recipient` cannot be the zero address.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * - `sender` must have a balance of at least `amount`.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    function _transfer(address sender, address recipient, uint256 amount) internal virtual {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        require(sender != address(0), &quot;ERC20: transfer from the zero address&quot;);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        require(recipient != address(0), &quot;ERC20: transfer to the zero address&quot;);</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        _beforeTokenTransfer(sender, recipient, amount);</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        _balances[sender] = _balances[sender].sub(amount, &quot;ERC20: transfer amount exceeds balance&quot;);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        _balances[recipient] = _balances[recipient].add(amount);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        emit Transfer(sender, recipient, amount);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    /** @dev Creates `amount` tokens and assigns them to `account`, increasing</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * the total supply.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     *</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * Emits a {Transfer} event with `from` set to the zero address.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     *</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * Requirements</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     *</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * - `to` cannot be the zero address.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    function _mint(address account, uint256 amount) internal virtual {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        require(account != address(0), &quot;ERC20: mint to the zero address&quot;);</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        _beforeTokenTransfer(address(0), account, amount);</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        _totalSupply = _totalSupply.add(amount);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        _balances[account] = _balances[account].add(amount);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        emit Transfer(address(0), account, amount);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @dev Destroys `amount` tokens from `account`, reducing the</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * total supply.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     *</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * Emits a {Transfer} event with `to` set to the zero address.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     *</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * Requirements</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     *</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * - `account` cannot be the zero address.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * - `account` must have at least `amount` tokens.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    function _burn(address account, uint256 amount) internal virtual {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        require(account != address(0), &quot;ERC20: burn from the zero address&quot;);</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        _beforeTokenTransfer(account, address(0), amount);</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        _balances[account] = _balances[account].sub(amount, &quot;ERC20: burn amount exceeds balance&quot;);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        _totalSupply = _totalSupply.sub(amount);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        emit Transfer(account, address(0), amount);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @dev Sets `amount` as the allowance of `spender` over the `owner`s tokens.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     *</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * This is internal function is equivalent to `approve`, and can be used to</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * e.g. set automatic allowances for certain subsystems, etc.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     *</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * Emits an {Approval} event.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     *</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * Requirements:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     *</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * - `owner` cannot be the zero address.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * - `spender` cannot be the zero address.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    function _approve(address owner, address spender, uint256 amount) internal virtual {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        require(owner != address(0), &quot;ERC20: approve from the zero address&quot;);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        require(spender != address(0), &quot;ERC20: approve to the zero address&quot;);</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        _allowances[owner][spender] = amount;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        emit Approval(owner, spender, amount);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @dev Sets {decimals} to a value other than the default one of 18.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     *</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * WARNING: This function should only be called from the constructor. Most</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * applications that interact with token contracts will not expect</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * {decimals} to ever change, and may work incorrectly if it does.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    function _setupDecimals(uint8 decimals_) internal {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        _decimals = decimals_;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @dev Hook that is called before any transfer of tokens. This includes</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * minting and burning.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     *</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * Calling conditions:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     *</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * - when `from` and `to` are both non-zero, `amount` of ``from``&#x27;s tokens</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * will be to transferred to `to`.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * - when `from` is zero, `amount` tokens will be minted for `to`.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * - when `to` is zero, `amount` of ``from``&#x27;s tokens will be burned.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * - `from` and `to` are never both zero.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     *</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * To learn more about hooks, head to xref:ROOT:extending-contracts.adoc#using-hooks[Using Hooks].</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    function _beforeTokenTransfer(address from, address to, uint256 amount) internal virtual { }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">// File: contracts/SushiToken.sol</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">pragma solidity 0.6.12;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">// SushiToken with Governance.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">contract SushiToken is ERC20(&quot;SushiToken&quot;, &quot;SUSHI&quot;), Ownable {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    /// @notice Creates `_amount` token to `_to`. Must only be called by the owner (MasterChef).</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    function mint(address _to, uint256 _amount) public onlyOwner {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        _mint(_to, _amount);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        _moveDelegates(address(0), _delegates[_to], _amount);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Copied and modified from YAM code:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    // https://github.com/yam-finance/yam-protocol/blob/master/contracts/token/YAMGovernanceStorage.sol</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    // https://github.com/yam-finance/yam-protocol/blob/master/contracts/token/YAMGovernance.sol</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Which is copied and modified from COMPOUND:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    // https://github.com/compound-finance/compound-protocol/blob/master/contracts/Governance/Comp.sol</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    /// @notice A record of each accounts delegate</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    mapping (address =&gt; address) internal _delegates;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    /// @notice A checkpoint for marking number of votes from a given block</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    struct Checkpoint {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        uint32 fromBlock;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        uint256 votes;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    /// @notice A record of votes checkpoints for each account, by index</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    mapping (address =&gt; mapping (uint32 =&gt; Checkpoint)) public checkpoints;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    /// @notice The number of checkpoints for each account</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    mapping (address =&gt; uint32) public numCheckpoints;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    /// @notice The EIP-712 typehash for the contract&#x27;s domain</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    bytes32 public constant DOMAIN_TYPEHASH = keccak256(&quot;EIP712Domain(string name,uint256 chainId,address verifyingContract)&quot;);</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    /// @notice The EIP-712 typehash for the delegation struct used by the contract</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    bytes32 public constant DELEGATION_TYPEHASH = keccak256(&quot;Delegation(address delegatee,uint256 nonce,uint256 expiry)&quot;);</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    /// @notice A record of states for signing / validating signatures</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    mapping (address =&gt; uint) public nonces;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      /// @notice An event thats emitted when an account changes its delegate</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    event DelegateChanged(address indexed delegator, address indexed fromDelegate, address indexed toDelegate);</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    /// @notice An event thats emitted when a delegate account&#x27;s vote balance changes</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    event DelegateVotesChanged(address indexed delegate, uint previousBalance, uint newBalance);</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @notice Delegate votes from `msg.sender` to `delegatee`</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @param delegator The address to get delegatee for</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    function delegates(address delegator)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        external</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        view</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        returns (address)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        return _delegates[delegator];</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">   /**</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    * @notice Delegate votes from `msg.sender` to `delegatee`</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    * @param delegatee The address to delegate votes to</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    */</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    function delegate(address delegatee) external {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        return _delegate(msg.sender, delegatee);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @notice Delegates votes from signatory to `delegatee`</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @param delegatee The address to delegate votes to</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @param nonce The contract state required to match the signature</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @param expiry The time at which to expire the signature</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @param v The recovery byte of the signature</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @param r Half of the ECDSA signature pair</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @param s Half of the ECDSA signature pair</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    function delegateBySig(</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        address delegatee,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        uint nonce,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        uint expiry,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        uint8 v,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        bytes32 r,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        bytes32 s</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    )</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        external</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        bytes32 domainSeparator = keccak256(</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            abi.encode(</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                DOMAIN_TYPEHASH,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                keccak256(bytes(name())),</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                getChainId(),</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                address(this)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            )</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        );</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        bytes32 structHash = keccak256(</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            abi.encode(</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                DELEGATION_TYPEHASH,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                delegatee,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                nonce,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                expiry</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            )</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        );</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        bytes32 digest = keccak256(</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            abi.encodePacked(</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;\x19\x01&quot;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                domainSeparator,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                structHash</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            )</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        );</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        address signatory = ecrecover(digest, v, r, s);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        require(signatory != address(0), &quot;SUSHI::delegateBySig: invalid signature&quot;);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        require(nonce == nonces[signatory]++, &quot;SUSHI::delegateBySig: invalid nonce&quot;);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        require(now &lt;= expiry, &quot;SUSHI::delegateBySig: signature expired&quot;);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        return _delegate(signatory, delegatee);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @notice Gets the current votes balance for `account`</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @param account The address to get votes balance</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @return The number of current votes for `account`</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    function getCurrentVotes(address account)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        external</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        view</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        returns (uint256)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        uint32 nCheckpoints = numCheckpoints[account];</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        return nCheckpoints &gt; 0 ? checkpoints[account][nCheckpoints - 1].votes : 0;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @notice Determine the prior number of votes for an account as of a block number</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @dev Block number must be a finalized block or else this function will revert to prevent misinformation.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @param account The address of the account to check</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @param blockNumber The block number to get the vote balance at</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     * @return The number of votes the account had as of the given block</span></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    function getPriorVotes(address account, uint blockNumber)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        external</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        view</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        returns (uint256)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        require(blockNumber &lt; block.number, &quot;SUSHI::getPriorVotes: not yet determined&quot;);</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        uint32 nCheckpoints = numCheckpoints[account];</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (nCheckpoints == 0) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            return 0;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        // First check most recent balance</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (checkpoints[account][nCheckpoints - 1].fromBlock &lt;= blockNumber) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            return checkpoints[account][nCheckpoints - 1].votes;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Next check implicit zero balance</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (checkpoints[account][0].fromBlock &gt; blockNumber) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            return 0;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        uint32 lower = 0;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        uint32 upper = nCheckpoints - 1;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        while (upper &gt; lower) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            uint32 center = upper - (upper - lower) / 2; // ceil, avoiding overflow</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            Checkpoint memory cp = checkpoints[account][center];</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (cp.fromBlock == blockNumber) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                return cp.votes;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            } else if (cp.fromBlock &lt; blockNumber) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                lower = center;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            } else {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                upper = center - 1;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        return checkpoints[account][lower].votes;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    function _delegate(address delegator, address delegatee)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        internal</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        address currentDelegate = _delegates[delegator];</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        uint256 delegatorBalance = balanceOf(delegator); // balance of underlying SUSHIs (not scaled);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        _delegates[delegator] = delegatee;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        emit DelegateChanged(delegator, currentDelegate, delegatee);</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        _moveDelegates(currentDelegate, delegatee, delegatorBalance);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    function _moveDelegates(address srcRep, address dstRep, uint256 amount) internal {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (srcRep != dstRep &amp;&amp; amount &gt; 0) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (srcRep != address(0)) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                // decrease old representative</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                uint32 srcRepNum = numCheckpoints[srcRep];</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                uint256 srcRepOld = srcRepNum &gt; 0 ? checkpoints[srcRep][srcRepNum - 1].votes : 0;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                uint256 srcRepNew = srcRepOld.sub(amount);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                _writeCheckpoint(srcRep, srcRepNum, srcRepOld, srcRepNew);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (dstRep != address(0)) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                // increase new representative</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                uint32 dstRepNum = numCheckpoints[dstRep];</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                uint256 dstRepOld = dstRepNum &gt; 0 ? checkpoints[dstRep][dstRepNum - 1].votes : 0;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                uint256 dstRepNew = dstRepOld.add(amount);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                _writeCheckpoint(dstRep, dstRepNum, dstRepOld, dstRepNew);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    function _writeCheckpoint(</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        address delegatee,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        uint32 nCheckpoints,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        uint256 oldVotes,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        uint256 newVotes</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    )</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        internal</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        uint32 blockNumber = safe32(block.number, &quot;SUSHI::_writeCheckpoint: block number exceeds 32 bits&quot;);</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (nCheckpoints &gt; 0 &amp;&amp; checkpoints[delegatee][nCheckpoints - 1].fromBlock == blockNumber) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            checkpoints[delegatee][nCheckpoints - 1].votes = newVotes;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        } else {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            checkpoints[delegatee][nCheckpoints] = Checkpoint(blockNumber, newVotes);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            numCheckpoints[delegatee] = nCheckpoints + 1;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        emit DelegateVotesChanged(delegatee, oldVotes, newVotes);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    function safe32(uint n, string memory errorMessage) internal pure returns (uint32) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        require(n &lt; 2**32, errorMessage);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        return uint32(n);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    function getChainId() internal pure returns (uint) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        uint256 chainId;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        assembly { chainId := chainid() }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        return chainId;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">// File: contracts/MasterChef.sol</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">pragma solidity 0.6.12;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">interface IMigratorChef {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Perform LP token migration from legacy UniswapV2 to SushiSwap.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Take the current LP token address and return the new LP token address.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Migrator should have full access to the caller&#x27;s LP token.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Return the new LP token address.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    //</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    // XXX Migrator must have allowance access to UniswapV2 LP tokens.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    // SushiSwap must mint EXACTLY the same amount of SushiSwap LP tokens or</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    // else something bad will happen. Traditional UniswapV2 does not</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    // do that so be careful!</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    function migrate(IERC20 token) external returns (IERC20);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">// MasterChef is the master of Sushi. He can make Sushi and he is a fair guy.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">//</span></span><span class="token-line" style="color:#393A34"><span class="token plain">// Note that it&#x27;s ownable and the owner wields tremendous power. The ownership</span></span><span class="token-line" style="color:#393A34"><span class="token plain">// will be transferred to a governance smart contract once SUSHI is sufficiently</span></span><span class="token-line" style="color:#393A34"><span class="token plain">// distributed and the community can show to govern itself.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">//</span></span><span class="token-line" style="color:#393A34"><span class="token plain">// Have fun reading it. Hopefully it&#x27;s bug-free. God bless.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">contract MasterChef is Ownable {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    using SafeMath for uint256;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    using SafeERC20 for IERC20;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Info of each user.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    struct UserInfo {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        uint256 amount;     // How many LP tokens the user has provided.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        uint256 rewardDebt; // Reward debt. See explanation below.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        //</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        // We do some fancy math here. Basically, any point in time, the amount of SUSHIs</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        // entitled to a user but is pending to be distributed is:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        //</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        //   pending reward = (user.amount * pool.accSushiPerShare) - user.rewardDebt</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        //</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Whenever a user deposits or withdraws LP tokens to a pool. Here&#x27;s what happens:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        //   1. The pool&#x27;s `accSushiPerShare` (and `lastRewardBlock`) gets updated.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        //   2. User receives the pending reward sent to his/her address.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        //   3. User&#x27;s `amount` gets updated.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        //   4. User&#x27;s `rewardDebt` gets updated.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Info of each pool.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    struct PoolInfo {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        IERC20 lpToken;           // Address of LP token contract.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        uint256 allocPoint;       // How many allocation points assigned to this pool. SUSHIs to distribute per block.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        uint256 lastRewardBlock;  // Last block number that SUSHIs distribution occurs.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        uint256 accSushiPerShare; // Accumulated SUSHIs per share, times 1e12. See below.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    // The SUSHI TOKEN!</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    SushiToken public sushi;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Dev address.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    address public devaddr;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Block number when bonus SUSHI period ends.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    uint256 public bonusEndBlock;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    // SUSHI tokens created per block.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    uint256 public sushiPerBlock;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Bonus muliplier for early sushi makers.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    uint256 public constant BONUS_MULTIPLIER = 10;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    // The migrator contract. It has a lot of power. Can only be set through governance (owner).</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    IMigratorChef public migrator;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Info of each pool.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    PoolInfo[] public poolInfo;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Info of each user that stakes LP tokens.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    mapping (uint256 =&gt; mapping (address =&gt; UserInfo)) public userInfo;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Total allocation poitns. Must be the sum of all allocation points in all pools.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    uint256 public totalAllocPoint = 0;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    // The block number when SUSHI mining starts.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    uint256 public startBlock;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    event Deposit(address indexed user, uint256 indexed pid, uint256 amount);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    event Withdraw(address indexed user, uint256 indexed pid, uint256 amount);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    event EmergencyWithdraw(address indexed user, uint256 indexed pid, uint256 amount);</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    constructor(</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        SushiToken _sushi,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        address _devaddr,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        uint256 _sushiPerBlock,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        uint256 _startBlock,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        uint256 _bonusEndBlock</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    ) public {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        sushi = _sushi;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        devaddr = _devaddr;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        sushiPerBlock = _sushiPerBlock;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        bonusEndBlock = _bonusEndBlock;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        startBlock = _startBlock;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    function poolLength() external view returns (uint256) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        return poolInfo.length;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Add a new lp to the pool. Can only be called by the owner.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    // XXX DO NOT add the same LP token more than once. Rewards will be messed up if you do.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    function add(uint256 _allocPoint, IERC20 _lpToken, bool _withUpdate) public onlyOwner {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (_withUpdate) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            massUpdatePools();</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        uint256 lastRewardBlock = block.number &gt; startBlock ? block.number : startBlock;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        totalAllocPoint = totalAllocPoint.add(_allocPoint);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        poolInfo.push(PoolInfo({</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            lpToken: _lpToken,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            allocPoint: _allocPoint,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            lastRewardBlock: lastRewardBlock,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            accSushiPerShare: 0</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        }));</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Update the given pool&#x27;s SUSHI allocation point. Can only be called by the owner.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    function set(uint256 _pid, uint256 _allocPoint, bool _withUpdate) public onlyOwner {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (_withUpdate) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            massUpdatePools();</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        totalAllocPoint = totalAllocPoint.sub(poolInfo[_pid].allocPoint).add(_allocPoint);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        poolInfo[_pid].allocPoint = _allocPoint;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Set the migrator contract. Can only be called by the owner.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    function setMigrator(IMigratorChef _migrator) public onlyOwner {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        migrator = _migrator;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Migrate lp token to another lp contract. Can be called by anyone. We trust that migrator contract is good.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    function migrate(uint256 _pid) public {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        require(address(migrator) != address(0), &quot;migrate: no migrator&quot;);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        PoolInfo storage pool = poolInfo[_pid];</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        IERC20 lpToken = pool.lpToken;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        uint256 bal = lpToken.balanceOf(address(this));</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        lpToken.safeApprove(address(migrator), bal);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        IERC20 newLpToken = migrator.migrate(lpToken);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        require(bal == newLpToken.balanceOf(address(this)), &quot;migrate: bad&quot;);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        pool.lpToken = newLpToken;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Return reward multiplier over the given _from to _to block.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    function getMultiplier(uint256 _from, uint256 _to) public view returns (uint256) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (_to &lt;= bonusEndBlock) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            return _to.sub(_from).mul(BONUS_MULTIPLIER);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        } else if (_from &gt;= bonusEndBlock) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            return _to.sub(_from);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        } else {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            return bonusEndBlock.sub(_from).mul(BONUS_MULTIPLIER).add(</span></span><span class="token-line" style="color:#393A34"><span class="token plain">                _to.sub(bonusEndBlock)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            );</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    // View function to see pending SUSHIs on frontend.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    function pendingSushi(uint256 _pid, address _user) external view returns (uint256) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        PoolInfo storage pool = poolInfo[_pid];</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        UserInfo storage user = userInfo[_pid][_user];</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        uint256 accSushiPerShare = pool.accSushiPerShare;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        uint256 lpSupply = pool.lpToken.balanceOf(address(this));</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (block.number &gt; pool.lastRewardBlock &amp;&amp; lpSupply != 0) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            uint256 multiplier = getMultiplier(pool.lastRewardBlock, block.number);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            uint256 sushiReward = multiplier.mul(sushiPerBlock).mul(pool.allocPoint).div(totalAllocPoint);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            accSushiPerShare = accSushiPerShare.add(sushiReward.mul(1e12).div(lpSupply));</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        return user.amount.mul(accSushiPerShare).div(1e12).sub(user.rewardDebt);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Update reward vairables for all pools. Be careful of gas spending!</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    function massUpdatePools() public {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        uint256 length = poolInfo.length;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        for (uint256 pid = 0; pid &lt; length; ++pid) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            updatePool(pid);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Update reward variables of the given pool to be up-to-date.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    function updatePool(uint256 _pid) public {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        PoolInfo storage pool = poolInfo[_pid];</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (block.number &lt;= pool.lastRewardBlock) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            return;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        uint256 lpSupply = pool.lpToken.balanceOf(address(this));</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (lpSupply == 0) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            pool.lastRewardBlock = block.number;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            return;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        uint256 multiplier = getMultiplier(pool.lastRewardBlock, block.number);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        uint256 sushiReward = multiplier.mul(sushiPerBlock).mul(pool.allocPoint).div(totalAllocPoint);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        sushi.mint(devaddr, sushiReward.div(10));</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        sushi.mint(address(this), sushiReward);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        pool.accSushiPerShare = pool.accSushiPerShare.add(sushiReward.mul(1e12).div(lpSupply));</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        pool.lastRewardBlock = block.number;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Deposit LP tokens to MasterChef for SUSHI allocation.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    function deposit(uint256 _pid, uint256 _amount) public {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        PoolInfo storage pool = poolInfo[_pid];</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        UserInfo storage user = userInfo[_pid][msg.sender];</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        updatePool(_pid);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (user.amount &gt; 0) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            uint256 pending = user.amount.mul(pool.accSushiPerShare).div(1e12).sub(user.rewardDebt);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            safeSushiTransfer(msg.sender, pending);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        pool.lpToken.safeTransferFrom(address(msg.sender), address(this), _amount);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        user.amount = user.amount.add(_amount);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        user.rewardDebt = user.amount.mul(pool.accSushiPerShare).div(1e12);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        emit Deposit(msg.sender, _pid, _amount);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Withdraw LP tokens from MasterChef.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    function withdraw(uint256 _pid, uint256 _amount) public {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        PoolInfo storage pool = poolInfo[_pid];</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        UserInfo storage user = userInfo[_pid][msg.sender];</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        require(user.amount &gt;= _amount, &quot;withdraw: not good&quot;);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        updatePool(_pid);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        uint256 pending = user.amount.mul(pool.accSushiPerShare).div(1e12).sub(user.rewardDebt);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        safeSushiTransfer(msg.sender, pending);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        user.amount = user.amount.sub(_amount);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        user.rewardDebt = user.amount.mul(pool.accSushiPerShare).div(1e12);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        pool.lpToken.safeTransfer(address(msg.sender), _amount);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        emit Withdraw(msg.sender, _pid, _amount);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Withdraw without caring about rewards. EMERGENCY ONLY.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    function emergencyWithdraw(uint256 _pid) public {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        PoolInfo storage pool = poolInfo[_pid];</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        UserInfo storage user = userInfo[_pid][msg.sender];</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        pool.lpToken.safeTransfer(address(msg.sender), user.amount);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        emit EmergencyWithdraw(msg.sender, _pid, user.amount);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        user.amount = 0;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        user.rewardDebt = 0;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Safe sushi transfer function, just in case if rounding error causes pool to not have enough SUSHIs.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    function safeSushiTransfer(address _to, uint256 _amount) internal {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        uint256 sushiBal = sushi.balanceOf(address(this));</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (_amount &gt; sushiBal) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            sushi.transfer(_to, sushiBal);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        } else {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            sushi.transfer(_to, _amount);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Update dev address by the previous dev.</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    function dev(address _devaddr) public {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        require(msg.sender == devaddr, &quot;dev: wut?&quot;);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        devaddr = _devaddr;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/rooctblog/docs/solidity/projects/Five"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« Five</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/rooctblog/docs/solidity/projects/SushiBar"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">SushiBar »</div></a></div></nav></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Solidity</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/rooctblog/docs/solidity/example/Helloworld">HelloWorld</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/rooctblog/">Stack Overflow</a></li></ul></div><div class="col footer__col"><div class="footer__title">Feature</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/rooctblog/">Feature</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/rooctblog/blog">Blog</a></li><li class="footer__item"><a class="footer__link-item" href="/rooctblog/">GitHub</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 dev site, Inc. Built with dev.</div></div></div></footer></div>
<script src="/rooctblog/assets/js/runtime~main.11bca91f.js"></script>
<script src="/rooctblog/assets/js/main.8817d7c2.js"></script>
</body>
</html>